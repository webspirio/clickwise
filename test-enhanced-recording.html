<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Recording Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-area { border: 1px solid #ccc; padding: 20px; margin: 20px 0; }
        .test-area h3 { margin-top: 0; }
        .log { background: #f5f5f5; padding: 10px; margin: 10px 0; border-radius: 4px; }
        button { padding: 10px; margin: 5px; }
        input, textarea, select { margin: 5px; padding: 8px; }
    </style>
</head>
<body>
    <h1>Enhanced Recording Test</h1>
    <p>This page demonstrates the enhanced recording functionality with detailed element information, timestamps, and input tracking.</p>

    <!-- Simulate config for testing -->
    <script>
        window.clickwise_config = {
            recording_mode: true,
            dev_mode: true,
            ajax_url: '/wp-admin/admin-ajax.php',
            nonce: 'test-nonce',
            admin_url: '/wp-admin/options-general.php?page=clickwise-settings'
        };
    </script>

    <!-- Load the enhanced recorder -->
    <script>
        // Simple mock for AJAX requests
        XMLHttpRequest.prototype.send = function(data) {
            console.log('Mock AJAX Request:', data);
            console.log('Event data captured by server');
        };
    </script>

    <script src="assets/js/clickwise-recorder.js"></script>

    <div class="test-area">
        <h3>Button Tests</h3>
        <button id="test-button" onclick="console.log('Button clicked!')">Test Button</button>
        <button class="submit-btn" data-clickwise-name="Custom Submit Button">Submit Button</button>
        <input type="button" value="Input Button" name="input-btn">
        <input type="submit" value="Submit Input" name="submit-input">
    </div>

    <div class="test-area">
        <h3>Link Tests</h3>
        <a href="https://example.com" target="_blank">External Link</a>
        <a href="/internal-page" title="Internal Page">Internal Link</a>
        <a href="mailto:test@example.com">Email Link</a>
    </div>

    <div class="test-area">
        <h3>Image Tests</h3>
        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzMzNyIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1zaXplPSIxNiIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+SW1hZ2U8L3RleHQ+PC9zdmc+" alt="Test Image" onclick="console.log('Image clicked!')">
    </div>

    <div class="test-area">
        <h3>Form Tests</h3>
        <form name="test-form" action="/submit" method="post">
            <div>
                <label>Text Input:</label>
                <input type="text" name="username" placeholder="Enter username">
            </div>
            <div>
                <label>Email Input:</label>
                <input type="email" name="email" placeholder="Enter email">
            </div>
            <div>
                <label>Password Input:</label>
                <input type="password" name="password" placeholder="Enter password">
            </div>
            <div>
                <label>Textarea:</label>
                <textarea name="message" placeholder="Enter your message"></textarea>
            </div>
            <div>
                <label>Select:</label>
                <select name="category">
                    <option value="">Choose category</option>
                    <option value="general">General</option>
                    <option value="support">Support</option>
                    <option value="billing">Billing</option>
                </select>
            </div>
            <div>
                <input type="checkbox" name="newsletter" id="newsletter">
                <label for="newsletter">Subscribe to newsletter</label>
            </div>
            <div>
                <button type="submit">Submit Form</button>
            </div>
        </form>
    </div>

    <div class="test-area">
        <h3>Custom Event Tests</h3>
        <button onclick="dispatchCustomEvent()">Dispatch Custom Event</button>
        <script>
            function dispatchCustomEvent() {
                const event = new CustomEvent('test-custom-event', {
                    detail: { action: 'button-click', value: 123 }
                });
                document.dispatchEvent(event);
            }
        </script>
    </div>

    <div class="test-area">
        <h3>Event Log</h3>
        <div id="event-log" class="log">
            Events will be logged here...
        </div>
        <button onclick="clearLog()">Clear Log</button>
    </div>

    <script>
        // Override console.log to capture events
        const eventLog = document.getElementById('event-log');
        const originalConsoleLog = console.log;
        console.log = function(...args) {
            originalConsoleLog.apply(console, args);
            if (args[0] && args[0].includes && args[0].includes('Clickwise Recording:')) {
                const timestamp = new Date().toLocaleTimeString();
                eventLog.innerHTML += `<div>[${timestamp}] ${args.join(' ')}</div>`;
                eventLog.scrollTop = eventLog.scrollHeight;
            }
        };

        function clearLog() {
            eventLog.innerHTML = 'Events will be logged here...';
        }

        // Test instructions
        console.log('Enhanced Recording Test Started');
        console.log('Try the following actions to test enhanced recording:');
        console.log('1. Click different types of buttons and links');
        console.log('2. Type in input fields (watch for input_change events)');
        console.log('3. Focus on input fields (watch for input_focus events)');
        console.log('4. Submit the form');
        console.log('5. Click the custom event button');
        console.log('6. Check the Event Log section for captured events');
    </script>
</body>
</html>